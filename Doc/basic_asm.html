<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<HEAD>
  <link rel="stylesheet" type="text/css" href="msoffice.css" />
  <Title>C64 Studio</Title>
</HEAD>

<body>
  <H3>BASIC - Combining with Assembler</H3>
  <div id="mybody">
    It's possible to include assembly symbols in BASIC programs. This requires a bit of setup.<br>
    Let's take a look at an example:<br>
    <br>
    <br>
    <div id="code"><br>     * = 16384
    ASM_START
              inc $d020
              ldx #0
              ldy #1
              lda #1
    ANOTHERLABEL
              sta $0400,x
              inx
              bne ANOTHERLABEL
              rts
          </div><br>
    <br>
    <div id="code"><br>    10IFA=0THENA=1:LOAD"ASM.PRG",8,1
    20SYS{ASM_START}
    30?"HELLO WORLD!"
    40?"LABEL ANOTHERLABEL = {ANOTHERLABEL}"
    50?"THIS SHOULD SHOW 49152: {$C000}"
    60DATA1,2,3,4,5
    </div>
    <br>
    <br>
    C64Studio interprets macros (e.g. texts inside squiggly braces {, } ) in three ways:<br>
    1) Predefined keywords for control keys or PETSCII replacement commands<br>
    2) A included symbol name<br>
    3) A literal value/expression<br>
    <br>
    <br>
    <img src="images/basic_include_assembly_sample_dependency.png"><br>
    Symbol names are included via the "Compile Target" property pane of the BASIC file. Check "dependant" and "symbols" on an ASM file.<br>
    <br>
    In this example both the labels "ASM_START" and "ANOTHERLABEL" are included via dependency and the BASIC file compiles with the inserted (decimal) value of the labels.<br>
    Now it's easy to relocate the assembly and automatically have the BASIC code adjust to the new address.<br>
    <br>
    <br>
  </div>
</body>
</HTML>
